{% extends "base.html" %}
{% block title %}カート - Flask Shop{% endblock %}

{% block content %}
  <h1>カート</h1>

  {% if items %}
    {{ url_for(
      <div class="card">
        <table>
          <thead>
            <tr>
              <th>商品</th>
              <th>単価</th>
              <th style="width:120px;">数量</th>
              <th>小計</th>
            </tr>
          </thead>
          <tbody>
            {% for it in items %}
              <tr>
                <td>{{ it.product.name }}</td>
                <td>¥{{ "{:,}".format(it.product.price) }}</td>
                <td>
                  <input type="number" name="qty_{{ it.product.id }}" value="{{ it.quantity }}" min="0" max="{{ it.product.stock }}">
                  <div class="muted" style="font-size:12px;">0で削除</div>
                </td>
                <td>¥{{ "{:,}".format(it.line_total) }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <div style="display:flex; justify-content: space-between; align-items:center; margin-top: 12px; gap: 10px; flex-wrap: wrap;">
          <div>
            <button class="btn" type="submit">更新</button>
            {{ url_for(買い物を続ける</a>
          </div>
          <div>
            <strong>合計: ¥{{ "{:,}".format(total) }}</strong>
          </div>
        </div>
      </div>
    </form>

    <div style="display:flex; gap:10px; margin-top: 12px; flex-wrap:wrap;">
      {{ url_for(
        <button class="btn danger" type="submit">カートを空にする</button>
      </form>
      {{ url_for(レジへ進む</a>
    </div>
  {% else %}
    <div class="card">
      <p class="muted">カートは空です。</p>
      {{ url_for(商品一覧へ</a>
    </div>
  {% endif %}
{% endblock %}